---
title: "StarWarsStats"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{StarWarsStats}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(StarWarsStats)
```

The goal of this R Package is to provide a set of utility functions to easily load, filter, validate, and analyze data from the 'dplyr::starwars' data set, focusing on character attributes, names, heights, genders, and associated starships. The package offers robust, well documented examples of R programming techniques, including, 'dplyr' wrangling, input validation, and error handling within a fun, accessible domain. It was created as an educational exercise to demonstrate practical R function writing and documentation standards, and is primarily intended for students learning R programming who want hands on examples of data manipulation and building reuseable functions within validation checks.

## Installation

Since this package is not yet on CRAN, you can install the development version directly from [GitHub](https://github.com/skywalshUSF/StarWarsStats) using the 'remotes' package.

### Prerequisites

You must have the following packages installed:

remotes: To install packages directly from GitHub.

dplyr: This package contains the 'starwars' dataset and the functions the package relies on.

You can install these prerequisites by running the following command in your R console:

```{r}
# install.packages(c("remotes", "dplyr"))
```


### Install the 'StarWarsStats' Package

Once the remotes package is installed, use the install_github() function:

```{r}
# Install 'StarWarsStats' package

# remotes::install_github("skywalshUSF/StarWarsStats", build_vignettes = TRUE)
```

### Load the Package

After installation is complete, you can load the package and start using your functions:

```{r}
# library(StarWarsStats)
```

## Data

The 'StarWarsStats' package uses the widely available 'starwars' dataset provided by the 'dplyr' package.

Source: The data is a curated selection from the Star Wars API (SWAPI), packaged for use in R.

Content: It contains 87 characters across 14 variables, covering biographical, physical, and historical information (e.g., name, height, species, and films appeared in).

Key Detail (Birth Year): Note that birth years are measured relative to the Battle of Yavin (BBY). A positive number (e.g., 41.9) means the event occurred Before the Battle of Yavin, and a negative number means it occurred After the Battle of Yavin (ABY).

```{r}
# To see a full description of all 14 variables in the dataset, run the following command in your R console:

# ?starwars
# summary(starwars)
```


## Examples of Functions

### char_height_by_planet()

Filter Characters Taller Than a Minimum Height by Planet

Subsets the Star Wars characters who meet or exceed a specified minimum height 
and groups the results by their homeworld.

This function is useful for identifying the tallest individuals and analyzing 
their distribution across different planets. The resulting data frame includes 
the name, height, and homeworld columns from the dataset, but is grouped by 
homeworld and then sorted by height in descending order within each group.

```{r example1}
# Find all characters who are 200 cm (6'7") or taller
char_height_by_planet(min_height = 200)

# Find the giants of the galaxy (e.g., taller than 225 cm)
char_height_by_planet(min_height = 225)

```

### char_by_sex()

Filter Characters by Sex (Male or Female)

Subsets the Star Wars characters based on a user-specified sex input ('M' or 'F').

This function validates the input, converts 'M' to "male" and 'F' to "female"
to match the values in the 'starwars' dataset, and then filters the data.
The function returns a focused table including the character's name, sex, and homeworld,
grouped by sex and sorted alphabetically by name.

```{r example2}
# Find all female characters
char_by_sex(sex_input = "F")

# Find all male characters (case-insensitive check)
char_by_sex(sex_input = "m")

```

### chars_born_before()

Filter Characters Born Before a BBY Threshold

Returns a subset of Star Wars characters who were born earlier
than (or "before") a specified year threshold (BBY).

This function is designed for chronological analysis. In the 'starwars'
dataset, the 'birth_year' is given in BBY (Before Battle of Yavin). Therefore,
a higher number indicates the character was born *earlier* in the timeline.
The function filters for characters where 'birth_year' is *greater* than
'year_threshold_bby', effectively finding the older individuals.
The input range is validated to be between 8 and 896.

```{r example3}
# Find characters born before 200 BBY (e.g., Yoda, Jabba)
chars_born_before(year_threshold_bby = 200)

# Find characters born before 80 BBY
chars_born_before(year_threshold_bby = 80)

```

### get_starwars_data_by_name()

Retrieve Star Wars Data for a Specific Character

Filters the entire 'starwars' dataset to return all available
information for a single, named character.

This function is case-sensitive! You must enter the character's name
exactly as it appears in the 'name' column of the 'starwars' dataset
(e.g., "Luke Skywalker" works, but "luke skywalker" will cause an error).
It provides robust error handling if the specified name is not found.

```{r example4}
# Correct way to find Luke Skywalker
get_starwars_data_by_name("Luke Skywalker")

# Example of a non-matching name (will stop execution)
# \dontrun{
# get_starwars_data_by_name("Darth Vader")
# }

```

### get_starwars_data_by_starship()

Retrieve Characters Associated with a Specific Starship

Filters the 'starwars' dataset to find characters who have
piloted a specific starship.

This function is designed to search within the 'starships' list-column
of the 'starwars' dataset. It performs a case-insensitive search, meaning
"Millennium Falcon" and "millennium falcon" will yield the same results.
If no matching starship is found, or if no characters are associated with it,
the function stops with a clear error message.

```{r example5}
# Find characters who have flown the Millennium Falcon
get_starwars_data_by_starship(starship_name = "Millennium Falcon")

# Find characters associated with the X-wing (case-insensitive)
get_starwars_data_by_starship(starship_name = "x-wing")

# Example of a non-matching ship (will stop execution)
# \dontrun{
# get_starwars_data_by_starship("Imperial Star Destroyer")
# }
```
